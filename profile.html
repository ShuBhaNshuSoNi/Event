<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Profile - College Event Manager</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet" />
<style>
  body {font-family: 'Poppins', sans-serif; background: linear-gradient(135deg,#4b6cb7,#182848); color: white; margin: 0; min-height: 100vh; display:flex; flex-direction: column; align-items: center; padding: 40px;}
  h1 {text-align: center; margin-bottom: 30px;}
  .container {background: rgba(255,255,255,0.1); border-radius: 20px; padding: 40px; max-width: 500px; width: 100%; box-shadow: 0 10px 30px rgba(0,0,0,0.2); backdrop-filter: blur(20px);}
  label {display: block; margin: 15px 0 5px;}
  input { width: 100%; padding: 10px; font-size: 16px; border-radius: 8px; border: none; }
  button { margin-top: 20px; padding: 12px; width: 100%; border-radius: 8px; border: none; background: #ffdd57; color: #332e2e; font-weight: 700; cursor: pointer; }
  button:hover { background: #e6c942; }
</style>
</head>
<body>
<h1>Profile</h1>
<div class="container">
  <form id="profileForm">
    <label for="name">Name</label>
    <input type="text" id="name" required />
    <label for="email">Email</label>
    <input type="email" id="email" disabled />
    <button type="submit">Update Profile</button>
  </form>
</div>
<script type="module">
import { auth, db } from './js/firebase-config.js';
import { doc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

auth.onAuthStateChanged(async (user) => {
  if(user){
    const docRef= doc(db, 'users', user.uid);
    const docSnap = await getDoc(docRef);
    if(docSnap.exists()){
      const data = docSnap.data();
      document.getElementById('name').value = data.name || '';
      document.getElementById('email').value = user.email || '';
    }
  } else {
    location.href = 'login.html';
  }
});

document.getElementById('profileForm').addEventListener('submit', async e => {
  e.preventDefault();
  const user = auth.currentUser;
  if(user){
    const docRef = doc(db, 'users', user.uid);
    await updateDoc(docRef, {
      name: document.getElementById('name').value
    });
    alert('Profile updated!');
  }
});
</script>
</body>
</html>

